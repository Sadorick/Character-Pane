<!DOCTYPE html>
<html>
<head>
<title>Character Pane</title>

<style>
.pane {
  width: 900px;
  border: 4px solid #b38f00;  
  border-radius: 12px;
  background: linear-gradient(#1b1b22, #14141a);
  padding: 20px;
  box-shadow: 0 0 15px #000;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.title {
  text-align: center;
  color: gold;
  font-size: 32px;
  margin-bottom: 20px;
  text-shadow: 1px 1px 2px #000;
}

/* Paper Doll Grid */
.paper-doll {
  display: grid;
  grid-template-columns: 140px 180px 140px; /* left | portrait | right */
  grid-template-rows: repeat(4, 120px); /* 4 slots tall */
  gap: 15px;
  justify-items: center;
  align-items: center;
  position: relative;
  overflow: visible;  /* ensure tooltips aren't cut off */
}


/* Portrait spans all 4 rows */
.portrait {
  grid-column: 2;
  grid-row: 1 / span 4;
  width: 180px;   /* fixed width */
  height: 100%;   /* fill 4 rows height */
  border: 4px solid gold;
  border-radius: 8px;
  background-size: cover;    /* scale and crop nicely */
  background-position: center;
  box-shadow: 0 0 10px #000 inset;
  z-index: 1;
}

/* Left slots */
#L1 { grid-column: 1; grid-row: 1; }
#L2 { grid-column: 1; grid-row: 2; }
#L3 { grid-column: 1; grid-row: 3; }
#L4 { grid-column: 1; grid-row: 4; }

/* Right slots */
#R1 { grid-column: 3; grid-row: 1; }
#R2 { grid-column: 3; grid-row: 2; }
#R3 { grid-column: 3; grid-row: 3; }
#R4 { grid-column: 3; grid-row: 4; }

/* Slots style */
.slot {
  width: 120px;
  height: 120px;
  border: 3px solid #b38f00;
  border-radius: 6px;
  background: linear-gradient(#222, #1a1a1a);
  position: relative;
  cursor: pointer;
  overflow: visible;  /* important for tooltip */
  box-shadow: 0 0 5px #000 inset;
  transition: all 0.2s ease;
  z-index: 2;
}

.slot img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  pointer-events: none;
  border-radius: 4px;
}

.tooltip {
  position: absolute;
  left: 130px;  /* position to the right */
  top: 0;
  display: none;
  background: #111;
  color: #fff;
  border: 2px solid gold;
  padding: 8px;
  font-size: 16px;
  width: 220px;
  pointer-events: none;
  border-radius: 6px;
  box-shadow: 0 0 10px #000;
  z-index: 999;  /* ensure itâ€™s above everything */
}

.slot:hover .tooltip {
  display: block;
}



</style>
</head>

<body>

<div class="pane">
  <div class="title" id="name">Loading...</div>

  <div class="paper-doll">
    <!-- Left slots -->
    <div class="slot" id="L1"><img><div class="tooltip"></div></div>
    <div class="slot" id="L2"><img><div class="tooltip"></div></div>
    <div class="slot" id="L3"><img><div class="tooltip"></div></div>
    <div class="slot" id="L4"><img><div class="tooltip"></div></div>

    <!-- Portrait -->
    <div class="portrait" id="portrait"></div>

    <!-- Right slots -->
    <div class="slot" id="R1"><img><div class="tooltip"></div></div>
    <div class="slot" id="R2"><img><div class="tooltip"></div></div>
    <div class="slot" id="R3"><img><div class="tooltip"></div></div>
    <div class="slot" id="R4"><img><div class="tooltip"></div></div>
  </div>
</div>


<script>
const charURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSuibkGWLHa5Sz7rJtRjgpZUnG6ZNxgtuxfFqiJB_OsUVqmOaxthADcFLJwmWxfAYvPO2zjFLroosZ1/pub?gid=0&single=true&output=csv";
const gearURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSuibkGWLHa5Sz7rJtRjgpZUnG6ZNxgtuxfFqiJB_OsUVqmOaxthADcFLJwmWxfAYvPO2zjFLroosZ1/pub?gid=457348905&single=true&output=csv";

function parseCSV(text) {
  return text.trim().split("\n").map(r => r.split(","));
}

fetch(charURL)
.then(r => r.text())
.then(t => {
  const data = {};
  parseCSV(t).forEach(row => data[row[0]] = row[1]);

  document.getElementById("name").innerText = data["Name"];
  document.getElementById("portrait").style.backgroundImage =
    `url(${data["Portrait"]})`;
});

fetch(gearURL)
.then(r => r.text())
.then(t => {
  const rows = parseCSV(t);

  rows.slice(1).forEach(row => {
    const [slot, item, desc, icon] = row;
    const el = document.getElementById(slot);
    if (!el) return;

    el.querySelector("img").src = icon;

    const tip = el.querySelector(".tooltip");
    tip.innerHTML = `<b>${item}</b><br>${desc}`;
  });
});
</script>

</body>
</html>
