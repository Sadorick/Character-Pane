<!DOCTYPE html>
<html>
<head>
<title>Character Pane</title>

<style>
.pane {
  width: 1100px; /* wider for stats on the side */
  border: 4px solid #b38f00;  
  border-radius: 12px;
  background: linear-gradient(#1b1b22, #14141a);
  padding: 20px;
  box-shadow: 0 0 15px #000;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Flex wrapper for paper doll + stats panel */
.content-wrapper {
  display: flex;
  flex-direction: row;
  gap: 40px; /* space between paper doll and stats */
  align-items: start;
}

/* Paper Doll Grid */
.paper-doll {
  display: grid;
  grid-template-columns: 140px 180px 140px; /* left | portrait | right */
  grid-template-rows: repeat(4, 120px); /* 4 slots */
  gap: 15px;
  justify-items: center;
  align-items: center;
  position: relative;
  overflow: visible;
}

/* Portrait */
.portrait {
  grid-column: 2;
  grid-row: 1 / span 4;
  width: 180px;
  height: calc(4*120px + 3*15px); /* 4 slots + 3 gaps */
  border: 4px solid gold;
  border-radius: 8px;
  background-size: cover;
  background-position: center;
  box-shadow: 0 0 10px #000 inset;
  z-index: 1;
}

/* Left slots */
#L1 { grid-column: 1; grid-row: 1; }
#L2 { grid-column: 1; grid-row: 2; }
#L3 { grid-column: 1; grid-row: 3; }
#L4 { grid-column: 1; grid-row: 4; }

/* Right slots */
#R1 { grid-column: 3; grid-row: 1; }
#R2 { grid-column: 3; grid-row: 2; }
#R3 { grid-column: 3; grid-row: 3; }
#R4 { grid-column: 3; grid-row: 4; }

/* Slots style */
.slot {
  width: 120px;
  height: 120px;
  border: 3px solid #b38f00;
  border-radius: 6px;
  background: linear-gradient(#222, #1a1a1a);
  position: relative;
  cursor: pointer;
  overflow: visible;
  box-shadow: 0 0 5px #000 inset;
  transition: all 0.2s ease;
  z-index: 2;
}

.slot img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  pointer-events: none;
  border-radius: 4px;
}

.slot:hover {
  border-color: #fff700;
  box-shadow: 0 0 10px #fff700 inset, 0 0 12px #fff700;
}

/* Tooltip */
.tooltip {
  position: absolute;
  left: 130px;  /* to the right of slot */
  top: 0;
  display: none;
  background: #111;
  color: #fff;
  border: 2px solid gold;
  padding: 8px;
  font-size: 16px;
  width: 220px;
  pointer-events: none;
  border-radius: 6px;
  box-shadow: 0 0 10px #000;
  z-index: 999;
}

.slot:hover .tooltip {
  display: block;
}

/* Stats panel */
.stats-panel {
  width: 250px;
  border: 3px solid #b38f00;
  border-radius: 8px;
  padding: 15px;
  background: linear-gradient(#1b1b22, #14141a);
  color: #fff;
  box-shadow: 0 0 10px #000;
  font-size: 18px;
}

.stats-panel h3 {
  color: gold;
  margin-bottom: 10px;
  text-align: center;
}

.stat {
  margin: 5px 0;
}




</style>
</head>

<body>

<div class="pane">
  <div class="title" id="name">Loading...</div>

  <div class="content-wrapper">
    <!-- Paper Doll -->
    <div class="paper-doll">
      <!-- Left slots -->
      <div class="slot" id="L1"><img><div class="tooltip"></div></div>
      <div class="slot" id="L2"><img><div class="tooltip"></div></div>
      <div class="slot" id="L3"><img><div class="tooltip"></div></div>
      <div class="slot" id="L4"><img><div class="tooltip"></div></div>

      <!-- Portrait -->
      <div class="portrait" id="portrait"></div>

      <!-- Right slots -->
      <div class="slot" id="R1"><img><div class="tooltip"></div></div>
      <div class="slot" id="R2"><img><div class="tooltip"></div></div>
      <div class="slot" id="R3"><img><div class="tooltip"></div></div>
      <div class="slot" id="R4"><img><div class="tooltip"></div></div>
    </div>

    <!-- Stats Panel -->
    <div class="stats-panel" id="stats-panel">
      <h3>Stats</h3>
      <div class="stat" id="stat-STR">STR: 0</div>
      <div class="stat" id="stat-DEX">DEX: 0</div>
      <div class="stat" id="stat-CON">CON: 0</div>
      <div class="stat" id="stat-INT">INT: 0</div>
      <div class="stat" id="stat-WIS">WIS: 0</div>
      <div class="stat" id="stat-CHA">CHA: 0</div>
    </div>
  </div>
</div>



<script>
const charURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSuibkGWLHa5Sz7rJtRjgpZUnG6ZNxgtuxfFqiJB_OsUVqmOaxthADcFLJwmWxfAYvPO2zjFLroosZ1/pub?gid=0&single=true&output=csv";
const gearURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSuibkGWLHa5Sz7rJtRjgpZUnG6ZNxgtuxfFqiJB_OsUVqmOaxthADcFLJwmWxfAYvPO2zjFLroosZ1/pub?gid=457348905&single=true&output=csv";

function parseCSV(text) {
  return text.trim().split("\n").map(r => r.split(","));
}

// ----------------- Character Fetch -----------------
fetch(charURL)
  .then(r => r.text())
  .then(t => {
    const data = {};
    parseCSV(t).forEach(row => data[row[0]] = row[1]);

    // Name and Portrait
    document.getElementById("name").innerText = data["Name"];
    document.getElementById("portrait").style.backgroundImage =
      `url(${data["Portrait"]})`;

    // Populate stats
    const stats = ["STR","DEX","CON","INT","WIS","CHA"];
    stats.forEach(stat => {
      const el = document.getElementById("stat-" + stat);
      if (el && data[stat]) el.innerText = `${stat}: ${data[stat]}`;
    });
  })
  .catch(err => console.error("Character fetch failed:", err));

// ----------------- Equipment Fetch -----------------
fetch(gearURL)
  .then(r => r.text())
  .then(t => {
    const rows = parseCSV(t);

    // Skip header row
    rows.slice(1).forEach(row => {
      const [slot, item, desc, icon] = row;

      const el = document.getElementById(slot);
      if (!el) return console.warn("Slot not found:", slot);

      // Set icon
      el.querySelector("img").src = icon;

      // Set hover tooltip
      const tip = el.querySelector(".tooltip");
      tip.innerHTML = `<b>${item}</b><br>${desc}`;
    });
  })
  .catch(err => console.error("Equipment fetch failed:", err));
</script>

</body>
</html>
